<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Puzzle Demo</title>

<style>
/* ================= Ná»€N + HOA RÆ I ================= */
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(#fdeff9,#ecf0ff);
  overflow:hidden;
}
#flowers{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
}

/* ================= CÄ‚N GIá»®A ================= */
.wrapper{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
  z-index:1;
}

/* ================= APP ================= */
.app{
  background:#fff;
  padding:30px 40px;
  border-radius:16px;
  box-shadow:0 20px 45px rgba(0,0,0,.18);
}

/* ================= CONTROLS ================= */
.controls{
  text-align:center;
  margin-bottom:16px;
}
.controls input{
  width:60px;
  font-size:16px;
  padding:4px;
  margin:0 6px;
}
button{
  padding:8px 18px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#f0f0f0;
}
button:hover{background:#e0e0e0}

/* ================= TOOLBAR ================= */
.toolbar{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:18px 0;
}
.tool{
  width:52px;
  height:52px;
  border:2px solid #ddd;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  font-size:26px;
  background:#fff;
  transition:.2s;
}
.tool:hover{transform:scale(1.05)}
.tool.active{
  border-color:#ff4d4f;
  background:#ffecec;
  transform:scale(1.12);
}

/* ================= GRID ================= */
.grid{
  display:grid;
  gap:10px;
  justify-content:center;
}
.cell{
  width:82px;
  height:82px;
  border:2px solid #aaa;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:36px;
  cursor:pointer;
  background:#fff;
  transition:.15s;
}
.cell:active{
  transform:scale(.9);
}

/* hiá»‡u á»©ng pop */
.cell.pop{
  animation:pop .25s ease;
}
@keyframes pop{
  from{transform:scale(.6);opacity:.3}
  to{transform:scale(1);opacity:1}
}
</style>
</head>

<body>

<canvas id="flowers"></canvas>

<div class="wrapper">
  <div class="app">

    <div class="controls">
      Cao <input id="rows" type="number" value="3" min="1">
      DÃ i <input id="cols" type="number" value="7" min="1">
      <button onclick="createGrid()">Táº¡o LÆ°á»›i</button>
      <button onclick="resetGrid()">Reset</button>
    </div>

    <div class="toolbar" id="toolbar"></div>
    <div class="grid" id="grid"></div>

  </div>
</div>

<script>
/* ================= ICONS (Äáº¦Y Äá»¦ THEO HÃŒNH) ================= */
const icons = [
  "ðŸ·", // ly rÆ°á»£u
  "ðŸŽµ", // nháº¡c
  "ðŸŸª", // hoa vÄƒn / xoÃ¡y
  "â›µ", // thuyá»n buá»“m
  "ðŸ”¶", // kim cÆ°Æ¡ng Ä‘á»
  "âš“", // má» neo
  "ðŸª„", // Ä‘Å©a phÃ©p
  "ðŸ”", // kÃ­nh lÃºp
  "ðŸŽ‚"  // bÃ¡nh kem
];

let currentIcon = icons[0];
let gridData = [];

const toolbar = document.getElementById("toolbar");
const grid = document.getElementById("grid");

/* ================= TOOLBAR ================= */
icons.forEach(icon=>{
  const t = document.createElement("div");
  t.className = "tool" + (icon===currentIcon ? " active":"");
  t.textContent = icon;
  t.onclick = ()=>{
    document.querySelectorAll(".tool").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");
    currentIcon = icon;
  };
  toolbar.appendChild(t);
});

/* ================= GRID ================= */
function createGrid(){
  const r = +rows.value;
  const c = +cols.value;
  gridData = Array(r*c).fill("");
  grid.style.gridTemplateColumns = `repeat(${c},82px)`;
  render();
}

function render(){
  grid.innerHTML = "";
  gridData.forEach((v,i)=>{
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.textContent = v;
    cell.onclick = ()=>{
      gridData[i] = gridData[i] === "" ? currentIcon : "";
      cell.classList.add("pop");
      setTimeout(()=>cell.classList.remove("pop"),200);
      render();
    };
    grid.appendChild(cell);
  });
}

function resetGrid(){
  grid.innerHTML = "";
  gridData = [];
}

/* ================= HOA RÆ I ================= */
const canvas = document.getElementById("flowers");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize",resize);

const petals = Array.from({length:45},()=>({
  x:Math.random()*canvas.width,
  y:Math.random()*canvas.height,
  r:Math.random()*6+4,
  s:Math.random()*1.2+.5
}));

function fall(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  petals.forEach(p=>{
    p.y += p.s;
    p.x += Math.sin(p.y*0.01);
    if(p.y > canvas.height){
      p.y = -10;
      p.x = Math.random()*canvas.width;
    }
    ctx.beginPath();
    ctx.fillStyle="rgba(255,182,193,.85)";
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(fall);
}
fall();
</script>

</body>
</html>
